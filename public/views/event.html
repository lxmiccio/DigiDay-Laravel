<!-- Flawless -->

<div class="row">
  <div class="col-md-8 col-md-offset-2 col-sm-10 col-sm-offset-1 col-xs-12 col-xs-offset-0">
    <div class="jumbotron">
      <div class="row">
        <div class="col-xs-12">
          <h2 class="text-center"><strong>{{ctrl.event.name}}</strong></h2>
        </div>
      </div>

      <div class="row br-sm"></div>

      <div class="row">
        <div class="col-xs-12">
          <p class="text-center">Argomento: <strong>{{ctrl.event.topic.name}}</strong></p>
        </div>
      </div>

      <div class="row br-sm"></div>

      <div class="row">
        <div class="col-xs-12">
          <p class="text-center">Descrizione: {{ctrl.event.description}}a</p>
        </div>
      </div>

      <div class="row br-sm"></div>

      <div class="row">
        <div class="col-xs-12">
          <p class="text-center">La lezione sarà tenuta da <a ng-click="index.redirect('utente/' + ctrl.event.user.id)"><strong>{{ctrl.event.user.firstName}} {{ctrl.event.user.lastName}}</strong></a> e si terrà in aula <strong>{{ctrl.event.classroom.name}}</strong> il giorno <strong>{{ctrl.formatDate(ctrl.event.startingDate, 'dd/MM/yyyy')}}</strong> dalle <strong>{{ctrl.formatDate(ctrl.event.startingDate, 'HH:mm')}}</strong> alle <strong>{{ctrl.formatDate(ctrl.event.endingDate, 'HH:mm')}}</strong></p>
        </div>
      </div>

      <div class="row br-sm"></div>

      <div class="row">
        <div class="col-xs-12">
          <p class="text-center">Partecipanti: <strong>{{ctrl.event.users.length}}</strong>/<strong>{{ctrl.event.maximumPartecipants}}</strong></p>
        </div>
      </div>

      <div class="row br-sm" ng-if="index.isAuthenticated()"></div>

      <div class="row" ng-if="index.isAuthenticated()">
        <div class="col-xs-12">
          <div class="text-center" ng-if="index.user.id == ctrl.event.user.id">
            <button class="btn btn-danger" ng-click="ctrl.remove(ctrl.event)">Elimina</button>
          </div>
          <div class="text-center" ng-if="index.user.id != ctrl.event.user.id">
            <button class="btn btn-success" ng-click="ctrl.subscribe(ctrl.event, index.user)" ng-if="!ctrl.isSubscribed(ctrl.event, index.user) && !(ctrl.event.users.length >= ctrl.event.maximumPartecipants)">Partecipa</button>
            <button class="btn btn-danger" ng-click="ctrl.unsubscribe(ctrl.event, index.user)" ng-if="ctrl.isSubscribed(ctrl.event, index.user)">Annulla</button>
          </div>
        </div>
      </div>

      <div class="row br-sm" ng-if="ctrl.event.users.length > 0"></div>

      <div class="row" style="margin-top: -5px;" ng-if="ctrl.event.users.length > 0">
        <div class="col-xs-12">
          <table class="table table-striped">
            <thead>
              <tr>
                <th class="col-xs-4 text-center">Matricola</th>
                <th class="col-xs-4 text-center">Nome</th>
                <th class="col-xs-4 text-center">Cognome</th>
              </tr>
            </thead>
            <tbody>
              <tr ng-repeat="user in ctrl.event.users">
                <td class="text-center" style="padding-top: 9px;">{{user.fresher}}</td>
                <td class="text-center" style="padding-top: 9px;">{{user.firstName}}</td>
                <td class="text-center" style="padding-top: 9px;">{{user.lastName}}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
